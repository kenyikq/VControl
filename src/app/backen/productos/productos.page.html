<ion-header>
  <ion-toolbar>
    <ion-buttons slot="end" style="width: 41px; margin-right: 47px;" >
      <ion-button [routerLink]= "['/home']" >
        <ion-icon style="width: 22px;" color="danger" name="home" slot="icon-only"></ion-icon>
        
      </ion-button>
      <ion-button [routerLink]= "['/registro']" >
        <ion-icon color="danger" name="person-circle-outline" slot="icon-only"></ion-icon>
        
      </ion-button>
      
      </ion-buttons>
    <ion-title style="text-align: center; margin-right: 5%;" class="subtitulo">
      Productos
    </ion-title>

    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
     </ion-buttons>
   </ion-toolbar>
</ion-header>

<ion-content>
  

  
  <h3 *ngIf="actualizarProducto === true" class="titulo p-3 encabezado">Datos del producto</h3>
    <div *ngIf="actualizarProducto === true" class="datosProducto">
      <!-- Default Segment -->

      <ion-item>
        <ion-input disabled="true"  > <ion-label  class="normal" style="position: absolute;    margin-left: 10px;"></ion-label></ion-input>
        <ion-label style="margin-top: 6px;">Fecha:</ion-label>
        <ion-datetime cancelText="cancel" doneText="ok" displayFormat="DD-MM-YYYY" [(ngModel)]="newproducto.fecha"></ion-datetime>
     </ion-item>
      <ion-item>
        <ion-label  class="normal">Foto:</ion-label>

        <ion-buttons slot="end">
          
          <ion-button>
            <label for="file-upload"><ion-icon  slot="icon-only" name="images"></ion-icon></label>
            <input (change)="newImg($event)" id="file-upload" style="visibility:hidden" type="file" accept="image/*">
          </ion-button>
        </ion-buttons>
      </ion-item>

        <ion-item ><ion-label *ngIf="newproducto.unds ===0" style="position:absolute;position: absolute;font-size: 49px; color: red; transform: rotate( -45deg);">Vendido</ion-label>
          <img style="width: 100%;" class="image"  [src]="newproducto.foto">
        </ion-item>
  
       
      
      <ion-list>

        <ion-item>
             <ion-label    class="normal" >Articulo:</ion-label>
             <ion-input [(ngModel)]= "newproducto.nombre"  class="normal" type="string" inputmode="text" placeholder="Nombre del articulo"></ion-input>
         
        </ion-item>

        <ion-item>
          <ion-label  class="normal">Tipo de Articulo:</ion-label>
          <ion-select class="normal" [(ngModel)]="newproducto.tipoArticulo" (ionchange)="caracteristicasArticulos()">
            <ion-select-option value="Laptop">Laptop</ion-select-option>
            <ion-select-option value="Accesorio">Accesorio</ion-select-option>
            <ion-select-option value="Disco Duro">Disco Duro</ion-select-option>
          </ion-select><ion-input disabled="true" inputmode="number" > <ion-label   
            class="normal" style="position: absolute;    margin-left: 10px;"></ion-label></ion-input>
        </ion-item>

        <ion-item>

        <ion-label style="margin-top: 40px; background-color: #fd4a4a; border-radius: 30px; margin-left: auto; 
        margin-right: auto; text-align: center;" class="subtitulo">Detalles del Productos:</ion-label>
      </ion-item>
      <ion-item >
        <ion-label    class="normal" >Descripcion:</ion-label>
        <ion-input [(ngModel)]= "newproducto.descripcion.caracteristicas"  class="normal" type="string" inputmode="text"
         placeholder="Descripcion del articulo"></ion-input>
    
   </ion-item>
       <div *ngIf="newproducto.tipoArticulo === 'Laptop'||newproducto.tipoArticulo === 'Disco Duro'">
        <ion-item *ngIf="newproducto.tipoArticulo === 'Laptop'">

          <ion-label  class="normal"  class="normal">Procesador:</ion-label>
          
          <ion-select  class="normal" [(ngModel)]="newproducto.descripcion.procesador.tipo">
            <ion-select-option value="Core i3">Core i3</ion-select-option>
            <ion-select-option value="Core i5">Core i5</ion-select-option>
            <ion-select-option value="Core i7">Core i7</ion-select-option>
            <ion-select-option value="AMD">AMD</ion-select-option>
            <ion-select-option value="Celeron">Celeron</ion-select-option>
          </ion-select>

          <ion-select  class="normal"  [(ngModel)]="newproducto.descripcion.procesador.gen">
            <ion-select-option value="1ra">1ra</ion-select-option>
            <ion-select-option value="2da">2da</ion-select-option>
            <ion-select-option value="3ra">3ra</ion-select-option>
            <ion-select-option value="4ta">4ta</ion-select-option>
            <ion-select-option value="5ta">5ta</ion-select-option>
            <ion-select-option value="6ta">6ta</ion-select-option>
            <ion-select-option value="7ma">7ma</ion-select-option>
            <ion-select-option value="8va">8va</ion-select-option>
            <ion-select-option value="9na">9na</ion-select-option>
          </ion-select><ion-input disabled="true" inputmode="number" > <ion-label   
            class="normal" style="position: absolute;    margin-left: 10px;">Gen</ion-label></ion-input>

          
        </ion-item>

        <ion-item *ngIf="newproducto.tipoArticulo === 'Laptop'">

          <ion-label  class="normal">Ram:</ion-label>
          
          <ion-select  class="normal"  [(ngModel)]="newproducto.descripcion.ram.cant">
            <ion-select-option value="2gb">2gb</ion-select-option>
            <ion-select-option value="4gb">4gb</ion-select-option>
            <ion-select-option value="6gb">6gb</ion-select-option>
            <ion-select-option value="8gb">8gb</ion-select-option>
            <ion-select-option value="12gb">12gb</ion-select-option>
            <ion-select-option value="16gb">16gb</ion-select-option>
          </ion-select>

          <ion-select  class="normal" [(ngModel)]="newproducto.descripcion.ram.tipo">
            <ion-select-option value="DDR2">DDR2</ion-select-option>
            <ion-select-option value="DDR3">DDR3</ion-select-option>
            <ion-select-option value="DDR4">DDR4</ion-select-option>
            <ion-select-option value="DDR5">DDR5</ion-select-option>
            </ion-select>  <ion-input disabled="true" inputmode="number" > <ion-label   
              class="normal" style="position: absolute;    margin-left: 44px;"></ion-label></ion-input>    
        </ion-item >
        <ion-item *ngIf="newproducto.tipoArticulo === 'Laptop'||newproducto.tipoArticulo === 'Disco Duro'">

          <ion-label  class="normal">Almacenamiento:</ion-label>
          
          <ion-select class="normal" [(ngModel)]="newproducto.descripcion.almacenamiento.tipo">
            <ion-select-option value="SSD">SSD</ion-select-option>
            <ion-select-option value="HHD">HHD</ion-select-option>
            <ion-select-option value="M2">M2</ion-select-option>
            <ion-select-option value="eMC">eMC</ion-select-option>
          </ion-select>

          <ion-input [(ngModel)]= "newproducto.descripcion.almacenamiento.cant" class="normal" type="number" inputmode="number" placeholder="cantidad"> <ion-label   
            class="normal" style="position: absolute;    margin-left: 44px;">GB</ion-label></ion-input>
          
        </ion-item>

        <ion-item *ngIf="newproducto.tipoArticulo === 'Laptop'">
          <ion-label  class="normal">Pantalla:</ion-label>
        
        <ion-select class="normal" [(ngModel)]="newproducto.descripcion.pantalla">
          
          <ion-select-option value="10">10</ion-select-option>
          <ion-select-option value="11">11</ion-select-option>
          <ion-select-option value="12">12</ion-select-option>
          <ion-select-option value="12.5">12.5</ion-select-option>
          <ion-select-option value="13">13</ion-select-option>
          <ion-select-option value="14">14</ion-select-option>
          <ion-select-option value="15">15.5</ion-select-option>
          <ion-select-option value="15.5">15.5</ion-select-option>
        </ion-select><ion-input disabled="true" inputmode="number" > <ion-label   
          class="normal" style="position: absolute;    margin-left: 10px;">Pulg</ion-label></ion-input>
      
        </ion-item>
      </div> 
        <ion-item>
          <ion-label style="background-color: #fd4a4a; border-radius: 30px; margin-left: auto; margin-top: 40px;
          margin-right: auto; text-align: center;" class="subtitulo">Detalles Monetario:</ion-label></ion-item>
        

        <ion-item style="width: 168px;">
          <ion-label    class="normal" >Costo:</ion-label>
           <ion-input [(ngModel)]= "newproducto.costo" class="normal" type="number" inputmode="number" placeholder="$"></ion-input>
          </ion-item>


                <ion-item style="width: 127px; margin-top: -50px; margin-left: 179px; position: absolute; ">
            <ion-label  class="normal" >Und:</ion-label>
             <ion-input  [(ngModel)]= "newproducto.unds"  class="normal" type="number" inputmode="number" placeholder="1"></ion-input>
          </ion-item>

          <ion-item style="width: 200px">
            <ion-label   class="normal" placeholder="">Gasto:</ion-label>
             <ion-input [(ngModel)]= "newproducto.gasto"  style="width: 168px;" class="normal" type="number" inputmode="number" placeholder="0"></ion-input>
             
             </ion-item>
             <ion-item>
              <ion-label    class="normal">Costo Neto: {{(newproducto.costo + newproducto.gasto)| replace }}</ion-label>
              
            </ion-item>

        
            <ion-item >
              <ion-label   class="normal" placeholder="">Precio:</ion-label>
               <ion-input [(ngModel)]= "newproducto.precio"  style="width: 168px;" class="normal" type="number" inputmode="number" placeholder="0"></ion-input>
               <ion-label  *ngIf="newproducto.precio>100"   class="normal"> {{(newproducto.precio/(newproducto.costo + newproducto.gasto)) | percent: '0.0'}}</ion-label>
               </ion-item>
          
           
              <ion-item *ngIf="newproducto.unds >0">
                <ion-label   class="normal" placeholder="">Precio Min:</ion-label>
                 <ion-input [(ngModel)]= "newproducto.precioMin"  style="width: 168px;" class="normal" type="number" inputmode="number" placeholder="0"></ion-input>
                 <ion-label  *ngIf="newproducto.precioMin>100"   class="normal"> {{(newproducto.precioMin/(newproducto.costo + newproducto.gasto)) | percent: '0.0'}}</ion-label>
                    
                 </ion-item>
                 <ion-item *ngIf="newproducto.unds ===0" >
                  <ion-label   class="normal" style="text-align: center; font-size: 20px !important;" placeholder="">Ganancias:
                     {{(10) | currency:'(DOP) ':'symbol':'3.0-0' }}</ion-label>
                      
                   </ion-item>
       

      </ion-list>
      
    </div>

    <div *ngIf="actualizarProducto === true" class="action-buttons" style=" padding-bottom: 60px !important; text-align: center;">
      <ion-button class="action-button"  *ngIf="isActive=== true "  shape="round"  (click)="guardarDatos()">  Enviar  </ion-button>
      <ion-button class="action-button" shape="round" (click)="actualizarProducto = false" style="color: red; --border-color: red;" class="signup-button"  fill="outline " >Cancelar </ion-button>
     
       </div>

<!--Listado de los articulos-->

   <div style="margin-top: 40px; margin-bottom: 30px;" *ngIf="actualizarProducto === false" class="contenedorControles">
    <h3  class="titulo p-2 encabezado">Listado de Productos</h3>
   
    <div id="lista" class="listaProductos">

      <ion-segment (ionChange)=" segmentChanged($event)" [value]="valueSelected" color="dark" scrollable="true">
        <ion-segment-button value="todos">
          <ion-label>Todos</ion-label>
        </ion-segment-button>
        <ion-segment-button value="disponibles">
          <ion-label>Disponibles</ion-label>
        </ion-segment-button>
        <ion-segment-button value="vendidos">
          <ion-label>Vendidos</ion-label>
        </ion-segment-button>
      </ion-segment>
      <ion-buttons slot="end"  >
        <ion-button  (click)="nuevo()" >
          <ion-icon  slot="start"  (click)="nuevo()" name="add"></ion-icon>  <ion-label style="text-align: center;" class="normal">Agregar</ion-label>
          
        </ion-button>
                
        </ion-buttons>

        <div class="row">
          <table border="1" class="table" id="tablaprueba" style="opacity: 108%; background: white !important;">
            <thead class="thead-dark normal" style= "font-weight: bold;" >
              <tr style="text-align: center;" >
                <th>Articulo</th>
                <th>Costo N</th>
                <th>Precio</th>
                <th>Stock</th>
                <th></th>
              </tr>
            </thead>
            <tbody class="normal">
              <tr style="text-align: center;" *ngFor="let producto of productos">
                <td>{{ producto.nombre }}</td>
                <td>
                  {{ producto.costo + producto.gasto | replace}}
                    
                </td>
                <td>{{ producto.precio | replace}}</td>
                <td>{{ producto.unds }}</td>
                <td style="width: 90px;"> 
                  <ion-buttons style="margin-top: -16px"   class="ionbutton" slot="end">
                    <ion-button  (click)="mostrarDatos(producto)">
                      <ion-icon slot="icon-only" name="create-sharp"></ion-icon>
                    </ion-button>
                    <ion-button class="icono"  (click)="deleteproducto(producto)" style="margin-left: -13px;">
                      <ion-icon slot="icon-only" color="danger"  name="trash-bin"  ></ion-icon>
                    </ion-button>
                  </ion-buttons>
                </td>
              </tr>
              <tr></tbody>
              <tbody>
             
          </table>


       </div>
    
   


    
  </div>

 </div>







</ion-content>
